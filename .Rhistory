base_brevets <- data.frame(
firm_name = character(),     # Nom de l'entreprise
n_patents = integer(),       # Nombre de brevets
ipc_main_code = character(), # Code de la classe IPC principale
ipc_main_desc = character(), # Description de la classe IPC principale
ipc_second_code = character(), # Code de la seconde classe IPC
ipc_second_desc = character(), # Description de la seconde classe IPC
addr_city_main = character(), # Ville principale de l'entreprise
addr_dept_main = character(), # Département principal de l'entreprise
stringsAsFactors = FALSE
)
files <- list.files(pattern = "^EN_ipc.*\\.txt$")#on importe tous les fichiers IPC voulus
data_list <- lapply(files, read.table, sep = "\t", header = FALSE, stringsAsFactors = FALSE)#on les mets en data frame
# On combine tous les data frames de la liste en un seul data frame
ipc_combined <- do.call(rbind, data_list)
# On nomme les colonnes
colnames(ipc_combined) <- c("IPC_code14", "Description")
# On nomme les colonnes
colnames(ipc_combined) <- c("IPC_code14", "Description")
# On extrait les 4 premiers caractères pour obtenir le code IPC4
ipc_combined$IPC_code4 <- substr(ipc_combined$IPC_code14, 1, 4)
#il reste cependant les codes à 1,2 et 3 caractères, on les enlève donc
ipc_combined <- ipc_combined[nchar(ipc_combined$IPC_code4) == 4, ]
# On garde une ligne unique pour chaque IPC_code4 avec sa première description associée
ipc_unique <- ipc_combined[!duplicated(ipc_combined$IPC_code4), c("IPC_code4", "Description")]
head(ipc_unique)
data_OECD<-read.csv("202202_EPO_App_reg_small.txt", sep = ",", stringsAsFactors = FALSE) #importation
